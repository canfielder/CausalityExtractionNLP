---
title: "Package / Shiny Model Tests - Preprocessing"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# Purpose
The purpose of this notebook is to test the intended final functions of this package and shiny model. This notebook is focucessed on processing raw input.

# Import
## Libraries
Direct Library import has been moved to the script R/install.R in order to maintain consistent library management across multiple project actions.
```{r import_libraries}
# Import All Scripts
script_path <- "../R/"
file_paths <- list.files(path = script_path, pattern = ".R", full.names = TRUE)

# Execute All Scripts
for (file in file_paths){
  source(file)
}

# Load Libraries
project_install_packages()
```

## Set Seed and Random States
```{r set_seed}
rs <- as.integer(5590)
set.seed(rs)
```

## Data
We'll import a random pdf from the available dataset to use as our example input.
We built our processing steps around the resultant text from the **Tabulizer** package. We'll convert from pdf to text immediately on the import, and then process this raw text.

We also need to upload our patterns reference, which will be used to remove specific custom patterns.

```{r}
# PDF Input
## Define Path
pdf_path <- "./../data/input_pdfs/bgd05jom.pdf"

## Import and Convert to Text
sample <- extract_text(pdf_path)

# Patterns File
patterns_col <- c("remove","comments")
patterns_raw <- read_excel(path = "../data/patterns.xlsx", col_names = patterns_col, )
patterns <- patterns_raw %>% pull(remove)
```

# Process Data
With our pdf now converted to text, we'll process this raw text data.
```{r}
text_processed <- process_text_JB(input_text = sample, 
                                  removal_patterns = patterns)
# inspect_vector(text_processed)
```


